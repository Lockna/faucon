<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `faucon_asm` crate."><meta name="keywords" content="rust, rustlang, rust-lang, faucon_asm"><title>faucon_asm - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../faucon_asm/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate faucon_asm</p><div class='block version'><p>Version 0.1.0</p></div><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all faucon_asm's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'faucon_asm', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/faucon_asm/lib.rs.html#1-243' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>faucon_asm</a></span></h1><div class='docblock'><p>Rust library for processing NVIDIA Falcon assembly.</p>
<h1 id="about-the-falcon" class="section-header"><a href="#about-the-falcon">About the Falcon</a></h1>
<p>The <strong>Fa</strong>st <strong>L</strong>ogic <strong>Con</strong>troller is a series of general-purpose embedded
microprocessors that have been produced since around 2005. With over three
billion units shipped, the Falcon has been used in many different places and
platforms, primarily NVIDIA GPUs starting from G98, but really everywhere a
controller for logic processing was needed.</p>
<p>Falcon units consist of:</p>
<ul>
<li>the core processor with its SRAM for code and data</li>
<li>the I/O space for communication with host systems</li>
<li>FIFO interface logic (optional)</li>
<li>memory interface logic (optional)</li>
<li>cryptographic AES coprocessor, making the Falcon a &quot;secretful unit&quot; (optional)</li>
<li>unit-specific logic to control, depending on how the processor is used (optional)</li>
</ul>
<h1 id="the-instruction-set-architecture" class="section-header"><a href="#the-instruction-set-architecture">The Instruction Set Architecture</a></h1>
<p>The inner workings of Falcon assembly are documented elsewhere. If you see this
disclaimer, odds are pretty high that nobody has started to work on it yet.</p>
<p>The heart of this crate is the <a href="struct.Instruction.html"><code>Instruction</code></a> structure. Objects should never
be created manually, unless you know what you are doing. Rather, instances
should be obtained through the <a href="fn.read_instruction.html"><code>read_instruction</code></a> function, which disassembles
a chunk of binary data into Falcon assembly.</p>
<p>See the respective documentation for more details on the usage possibilities.</p>
<h2 id="pretty-printing-instructions" class="section-header"><a href="#pretty-printing-instructions">Pretty-printing instructions</a></h2>
<p>Instructions implement the <a href="https://doc.rust-lang.org/std/fmt/trait.Display.html"><code>Display</code></a> trait so they can emit valid assembly code
for the wrapped instruction which could be thrown at an assembler.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">instruction</span> <span class="op">=</span> <span class="ident">faucon_asm</span>::<span class="ident">read_instruction</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">&amp;</span>[<span class="number">0xBFu8</span>, <span class="number">0x1Fu8</span>][..])
    .<span class="ident">expect</span>(<span class="string">&quot;Failed to disassemble the given bytes into a valid instruction&quot;</span>);

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">instruction</span>.<span class="ident">to_string</span>(), <span class="string">&quot;ld b32 $r15 D[$r1]&quot;</span>);</pre></div>
<h2 id="instruction-operands" class="section-header"><a href="#instruction-operands">Instruction operands</a></h2>
<p>Of course, an <a href="struct.Instruction.html"><code>Instruction</code></a> object lets you access its operands which are used to
execute the operation. There are various types of operands in Falcon assembly:</p>
<ul>
<li>registers (<code>$r0</code>, <code>$sp</code>, ...)</li>
<li>immediates (<code>0xAB</code>, <code>-0x98</code>, ...)</li>
<li>CPU flags from the <code>$flags</code> register (<code>pX</code>, <code>c</code>, ...)</li>
<li>direct memory accesses (<code>D[$sp + 0xAB]</code>, <code>I[$r0 + $r4]</code>, ...)</li>
</ul>
<p>To work with these data efficiently, Falcon wraps up the values and corresponding
metadata in the <a href="./operands/enum.Operand.html"><code>Operand</code></a> enumeration. A list of instruction operands can be
obtained through <a href="struct.Instruction.html#method.operands"><code>Instruction::operands</code></a>.</p>
<h2 id="comparing-instructions" class="section-header"><a href="#comparing-instructions">Comparing instructions</a></h2>
<p>In Falcon assembly, it is quite usual that <a href="struct.Instruction.html"><code>Instruction</code></a>s have multiple variants
with different opcodes and different operand combinations. To compare the natures
of instructions, <a href="struct.Instruction.html#method.kind"><code>Instruction::kind</code></a> exposes an <a href="./isa/enum.InstructionKind.html"><code>InstructionKind</code></a> variant.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">instruction</span> <span class="op">=</span> <span class="ident">faucon_asm</span>::<span class="ident">read_instruction</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">&amp;</span>[<span class="number">0xBFu8</span>, <span class="number">0x1Fu8</span>][..])
    .<span class="ident">expect</span>(<span class="string">&quot;Failed to disassemble the given bytes into a valid instruction&quot;</span>);

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">instruction</span>.<span class="ident">kind</span>(), <span class="ident">faucon_asm</span>::<span class="ident">InstructionKind</span>::<span class="ident">LD</span>);</pre></div>
<h1 id="assembling-instructions" class="section-header"><a href="#assembling-instructions">Assembling instructions</a></h1>
<p>Functionality for assembling intermediate representation to machine code is
currently unsupported and planned for the future.</p>
<p>For the time being, it is advised to use <code>envyas</code> from the <a href="https://github.com/envytools/envytools">envytools</a>
collection.</p>
<h1 id="disassembling-instructions" class="section-header"><a href="#disassembling-instructions">Disassembling instructions</a></h1>
<p>As mentioned previously, the <a href="fn.read_instruction.html"><code>read_instruction</code></a> can be used to disassemble
raw instruction bytes into <a href="struct.Instruction.html"><code>Instruction</code></a> objects. The function can be called
repeatedly on a buffer of code until an error or <a href="enum.Error.html#variant.Eof"><code>Error::Eof</code></a> occurs.</p>
<p>It is within the user's responsibility to ensure that all possible exceptions
are handled correctly. The validity of an <a href="struct.Instruction.html"><code>Instruction</code></a> can be ensured through
<a href="struct.Instruction.html#method.is_valid"><code>Instruction::is_valid</code></a>.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use <a class="mod" href="../faucon_asm/disassembler/index.html" title="mod faucon_asm::disassembler">disassembler</a>::*;</code></td></tr><tr><td><code>pub use isa::<a class="enum" href="../faucon_asm/isa/enum.InstructionKind.html" title="enum faucon_asm::isa::InstructionKind">InstructionKind</a>;</code></td></tr><tr><td><code>pub use opcode::<a class="enum" href="../faucon_asm/opcode/enum.OperandSize.html" title="enum faucon_asm::opcode::OperandSize">OperandSize</a>;</code></td></tr><tr><td><code>pub use <a class="mod" href="../faucon_asm/operands/index.html" title="mod faucon_asm::operands">operands</a>::*;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="disassembler/index.html" title='faucon_asm::disassembler mod'>disassembler</a></td><td class='docblock-short'><p>Disassembler for the Falcon ISA.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="isa/index.html" title='faucon_asm::isa mod'>isa</a></td><td class='docblock-short'><p>Falcon ISA definitions to be used by the assembler and the disassembler.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="opcode/index.html" title='faucon_asm::opcode mod'>opcode</a></td><td class='docblock-short'><p>Abstractions over the Falcon opcode format.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="operands/index.html" title='faucon_asm::operands mod'>operands</a></td><td class='docblock-short'><p>Representations of Falcon instruction operands.</p>
</td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Instruction.html" title='faucon_asm::Instruction struct'>Instruction</a></td><td class='docblock-short'><p>A Falcon processor instruction.</p>
</td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.Error.html" title='faucon_asm::Error enum'>Error</a></td><td class='docblock-short'><p>Errors that are utilized by the crate.</p>
</td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.Result.html" title='faucon_asm::Result type'>Result</a></td><td class='docblock-short'><p>A result that is returned by the functions in this crate.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "faucon_asm";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>